<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Call with Authentication and Redirect</title>
    <script>
        async function fetchDataAndRedirect() {
            try {
				// Get the full URL of the current page
				const url = window.location.href;

				// Create a URL object
				const urlObj = new URL(url);

				// Use URLSearchParams to get the query parameters
				const params = new URLSearchParams(urlObj.search);

				// Get the 'user_id' parameter
				const userId = params.get('user_id');

				// Log the user_id to the console
				document.write('User ID:', userId);

                // Define the authentication token
                const authToken = '13962230fe43ae5eafa9fec42de3b6859b8d9f27cdc69ae43c5332b369bb4496';
                // Define the request body
                const requestBody = {
                    user_id: userId
                };
                
				// Log the request body for debugging
                document.write('Request Body:', requestBody);
				const response = await fetch('https://apim.workato.com/bostons/test-tatiana-brat-v1/auth', {
				  method: 'POST',
				  headers: {
					'Content-Type': 'application/json',
					'Accept': 'application/json', 
					'API-TOKEN': '13962230fe43ae5eafa9fec42de3b6859b8d9f27cdc69ae43c5332b369bb4496'
				  },
				  body: JSON.stringify(requestBody)
				});
				// Log the response status for debugging
                console.log('Response Status:', response.status);
				document.write('Response Status:', response.status)
                

			
            } catch (error) {
                console.error('There was a problem with the fetch operation:', error);
            }
        } 
		fetchDataAndRedirect();
        // Call the function when the page loads
    </script>
</head>
<body>
    <h1>Loading...</h1>
</body>
</html>
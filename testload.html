<!DOCTYPE html>
<html lang="en">
<head>

</head>
<body>
    <h1>Loaded</h1>
	<script>
    // Function to get the value of a specific query parameter by name
	async function fetchDataAndRedirect() {
		try {
			// Get the full query string from the URL
			const queryString = window.location.search;
			// Use URLSearchParams to parse the query string
			const urlParams = new URLSearchParams(queryString);
			// Return the value of the specified parameter
			const group =  urlParams.get('group');
			
			// Define the authentication token
			const authToken = '5fe704861ce1cdca3d0de625d7671de3e1ae80c783e6763b5e50febaa87776fd';
			// Define the request body
			const requestBody = {
				group_encoded: group
			};
	
			let  response = await fetch('https://apim.workato.com/bostons/test-tatiana-brat-v1/database', {
			  method: 'POST',
			  headers: {
				'Content-Type': 'application/json',
				'Accept': 'application/json', 
				'API-TOKEN': authToken
			  },
			  body: JSON.stringify(requestBody)
			});
			
			if (response.status === 200) {
							let answer = await response.json();
						
							// Log the full response to understand its structure
							document.write('Full Response:',JSON.stringify( answer.database, null, 4));
						
						  
						}
	} catch (error) {
                console.error('There was a problem with the fetch operation:', error);
            }}
	fetchDataAndRedirect();
</script>
</body>
</html>